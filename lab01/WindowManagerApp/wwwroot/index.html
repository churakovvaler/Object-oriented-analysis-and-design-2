<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Менеджер окон</title>
    <style>
        body {
            font-family: Arial;
            background: #f4f4f4;
            padding: 20px;
        }

        button {
            padding: 10px 15px;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .window {
            background: white;
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
        }

        .window-title {
            font-weight: bold;
        }
    </style>
</head>
<body>

<h2>Менеджер окон</h2>

<button onclick="openWindow()">Открыть окно «Настройки»</button>

<div id="windows"></div>

<script>
    const api = "http://localhost:5129/api/window";

    async function openWindow() {
        await fetch(`${api}/open`, { method: "POST" });
        loadWindows();
    }

    async function closeWindow(id) {
        await fetch(`${api}/${id}`, { method: "DELETE" });
        loadWindows();
    }

    async function loadWindows() {
        const response = await fetch(api);
        const windows = await response.json();

        const container = document.getElementById("windows");
        container.innerHTML = "";

        windows.forEach(w => {
            const div = document.createElement("div");
            div.className = "window";
            div.innerHTML = `
                <div class="window-title">${w.title}</div>
                <div>ID: ${w.id}</div>
                <div>Создано: ${new Date(w.createdAt).toLocaleString()}</div>
                <button onclick="closeWindow('${w.id}')">Закрыть</button>
            `;
            container.appendChild(div);
        });
    }

    loadWindows();
</script>

</body>
</html>